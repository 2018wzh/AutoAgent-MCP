<workflow>
    <name>mining_conditions_workflow</name>
    <system_input>
        <key>math_problem</key>
        <description>The math problem that user wants to solve.</description>
    </system_input>
    
    <system_output>
        <key>solution</key>
        <description>The detailed solution of the math problem, including steps and final answer.</description>
    </system_output>
    
    <agents>
        <agent category="new">
            <name>Objective Extraction Agent</name>
            <description>This agent is specialized in analyzing math problems and extracting the main objective or question being asked.</description>
        </agent>
        
        <agent category="new">
            <name>Condition Extraction Agent</name>
            <description>This agent is specialized in identifying and extracting all relevant conditions, given values, and constraints from the math problem.</description>
        </agent>
        
        <agent category="new">
            <name>Math Solver Agent</name>
            <description>This agent is specialized in evaluating whether conditions are sufficient and solving math problems using appropriate mathematical methods.</description>
        </agent>
    </agents>

    <events>
        <event>
            <name>on_start</name>
            <input>
                <key>math_problem</key>
                <description>The original math problem text.</description>
            </input>
            <task>Extract the main objective or question from the math problem.</task>
            <outputs>
                <output>
                    <key>objective</key>
                    <description>The clearly defined objective or question that needs to be solved.</description>
                    <action>
                        <type>RESULT</type>
                    </action>
                </output>
            </outputs>
            <agent>
                <name>Objective Extraction Agent</name>
                <model>gpt-4o-2024-08-06</model>
            </agent>
        </event>

        <event>
            <name>extract_conditions</name>
            <input>
                <key>objective</key>
                <description>The objective of the math problem.</description>
            </input>
            <task>Extract all relevant conditions, given values, and constraints from the math problem.</task>
            <outputs>
                <output>
                    <key>conditions</key>
                    <description>List of all identified conditions and constraints.</description>
                    <action>
                        <type>RESULT</type>
                    </action>
                </output>
            </outputs>
            <listen>
                <event>on_start</event>
            </listen>
            <agent>
                <name>Condition Extraction Agent</name>
                <model>gpt-4o-2024-08-06</model>
            </agent>
        </event>

        <event>
            <name>evaluate_and_solve</name>
            <input>
                <key>conditions</key>
                <description>The extracted conditions and constraints.</description>
            </input>
            <task>Evaluate if conditions are sufficient and solve the math problem if possible.</task>
            <outputs>
                <output>
                    <key>insufficient_conditions</key>
                    <description>Conditions are not sufficient to solve the problem.</description>
                    <condition>If the current conditions are not enough to solve the problem.</condition>
                    <action>
                        <type>GOTO</type>
                        <value>extract_conditions</value>
                    </action>
                </output>
                <output>
                    <key>solution</key>
                    <description>Complete solution with steps and final answer.</description>
                    <condition>If conditions are sufficient to solve the problem.</condition>
                    <action>
                        <type>RESULT</type>
                    </action>
                </output>
            </outputs>
            <listen>
                <event>extract_conditions</event>
            </listen>
            <agent>
                <name>Math Solver Agent</name>
                <model>gpt-4o-2024-08-06</model>
            </agent>
        </event>
    </events>
</workflow>