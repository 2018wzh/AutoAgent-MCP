<workflow>
    <system_input>
        <key>user_topic</key>
        <description>The user's topic that user wants to write a wikipiead-like article about.</description>
    </system_input>
    <system_output>
        <key>article</key>
        <description>The article that satisfies the user's request.</description>
    </system_output>
    <agents>
        <agent category="existing">
            <name>Web Surfer Agent</name>
            <description>This agent is used to search the web for the user's topic.</description>
        </agent>
        <agent category="new">
            <name>Outline Agent</name>
            <description>This agent is used to write an outline for the user's topic.</description>
        </agent>
        <agent category="new">
            <name>Evaluator Agent</name>
            <description>This agent is used to evaluate the outline of the user's topic.</description>
        </agent>
        <agent category="new">
            <name>Article Writer Agent</name>
            <description>This agent is used to write the article for the user's topic.</description>
        </agent>
    </agents>
    <events>
        <event>
            <name>on_start</name>
            <input>
                <key>user_topic</key>
                <description>The user's topic that user wants to write a wikipiead-like article about.</description>
            </input>
            <task>
                search the information about the topic and return the result.
            </task>
            <outputs>
                <output>
                    <key>search_result</key>
                    <description>The search result of the user's topic.</description>
                    <action>
                        <type>RESULT</type>
                    </action>
                </output>
            </outputs>
            <agent>
                <name>Web Surfer Agent</name>
                <model>gpt-4o-2024-08-06</model>
            </agent>
        </event>
        <event>
            <name>on_outline</name>
            <input>
                <key>search_result</key>
                <description>The search result of the user's topic.</description>
            </input>
            <task>
                write an outline for the user's topic.
            </task>
            <outputs>
                <output>
                    <key>outline</key>
                    <description>The outline of the user's topic.</description>
                    <action>
                        <type>RESULT</type>
                    </action>
                </output>
            </outputs>
            <listen>
                <event>on_start</event>
            </listen>
            <agent>
                <name>Outline Agent</name>
                <model>gpt-4o-2024-08-06</model>
            </agent>
        </event>
        <event>
            <name>on_evaluate</name>
            <input>
                <key>outline</key>
                <description>The outline of the user's topic.</description>
            </input>
            <task>
                evaluate the outline of the user's topic.
            </task>
            <outputs>
                <output>
                    <key>positive_feedback</key>
                    <description>The positive feedback of the outline of the user's topic.</description>
                    <condition>
                        If the outline is good enough, give positive feedback.
                    </condition>
                    <action>
                        <type>RESULT</type>
                    </action>
                </output>
                <output>
                    <key>negative_feedback</key>
                    <description>The negative feedback of the outline of the user's topic.</description>
                    <condition>
                        If the outline is not good enough, give negative feedback.
                    </condition>
                    <action>
                        <type>ABORT</type>
                    </action>
                </output>
            </outputs>
            <listen>
                <event>on_outline</event>
            </listen>
            <agent>
                <name>Evaluator Agent</name>
                <model>gpt-4o-2024-08-06</model>
            </agent>
        </event>
        <event>
            <name>on_write</name>
            <input>
                <key>outline</key>
                <description>The outline of user's topic.</description>
            </input>
            <task>
                write the article for the user's topic.
            </task>
            <outputs>
                <output>
                    <key>article</key>
                    <description>The article of the user's topic.</description>
                    <action>
                        <type>RESULT</type>
                    </action>
                </output>
            </outputs>
            <listen>
                <event>on_evaluate</event>
            </listen>
            <agent>
                <name>Article Writer Agent</name>
                <model>gpt-4o-2024-08-06</model>
            </agent>
        </event>
    </events>
</workflow>
