<workflow>
    <system_input>
        <key>problem_path</key>
        <description>The URL of the dataset containing math problems to solve: https://huggingface.co/datasets/openai/gsm8k</description>
    </system_input>
    <system_output>
        <key>solution_results</key>
        <description>The aggregated solution results with majority voting from multiple models</description>
    </system_output>

    <agents>
        <agent category="new">
            <name>Data Fetcher Agent</name>
            <description>This agent is responsible for downloading and processing the dataset from HuggingFace</description>
        </agent>
        <agent category="new">
            <name>Math Solver Agent</name>
            <description>This agent is specialized in solving mathematical problems step by step</description>
        </agent>
        <agent category="new">
            <name>Result Aggregator Agent</name>
            <description>This agent aggregates solutions from different models and performs majority voting</description>
        </agent>
    </agents>

    <global_variables>
        <variable>
            <key>dataset_url</key>
            <description>The URL of the GSM8K dataset</description>
            <value>https://huggingface.co/datasets/openai/gsm8k</value>
        </variable>
    </global_variables>

    <events>
        <event>
            <name>fetch_dataset</name>
            <input>
                <key>problem_path</key>
                <description>The URL of the dataset to download</description>
            </input>
            <task>Download the GSM8K dataset and save it locally</task>
            <outputs>
                <output>
                    <key>dataset_content</key>
                    <description>The downloaded math problems from the dataset</description>
                    <action>
                        <type>RESULT</type>
                    </action>
                </output>
            </outputs>
            <agent>
                <name>Data Fetcher Agent</name>
                <model>gpt-4o-2024-08-06</model>
            </agent>
        </event>

        <event>
            <name>solve_with_gpt4</name>
            <input>
                <key>dataset_content</key>
                <description>The math problems to solve</description>
            </input>
            <task>Solve the math problems using GPT-4 model</task>
            <outputs>
                <output>
                    <key>gpt4_solutions</key>
                    <description>Solutions generated by GPT-4</description>
                    <action>
                        <type>RESULT</type>
                    </action>
                </output>
            </outputs>
            <listen>
                <event>fetch_dataset</event>
            </listen>
            <agent>
                <name>Math Solver Agent</name>
                <model>gpt-4-1106-preview</model>
            </agent>
        </event>

        <event>
            <name>solve_with_claude</name>
            <input>
                <key>dataset_content</key>
                <description>The math problems to solve</description>
            </input>
            <task>Solve the math problems using Claude model</task>
            <outputs>
                <output>
                    <key>claude_solutions</key>
                    <description>Solutions generated by Claude</description>
                    <action>
                        <type>RESULT</type>
                    </action>
                </output>
            </outputs>
            <listen>
                <event>fetch_dataset</event>
            </listen>
            <agent>
                <name>Math Solver Agent</name>
                <model>claude-3-opus-20240229</model>
            </agent>
        </event>

        <event>
            <name>solve_with_mixtral</name>
            <input>
                <key>dataset_content</key>
                <description>The math problems to solve</description>
            </input>
            <task>Solve the math problems using Mixtral model</task>
            <outputs>
                <output>
                    <key>mixtral_solutions</key>
                    <description>Solutions generated by Mixtral</description>
                    <action>
                        <type>RESULT</type>
                    </action>
                </output>
            </outputs>
            <listen>
                <event>fetch_dataset</event>
            </listen>
            <agent>
                <name>Math Solver Agent</name>
                <model>mixtral-8x7b-instruct</model>
            </agent>
        </event>

        <event>
            <name>aggregate_results</name>
            <input>
                <key>model_solutions</key>
                <description>Solutions from different models to be aggregated</description>
            </input>
            <task>Aggregate solutions from all models using majority voting</task>
            <outputs>
                <output>
                    <key>solution_results</key>
                    <description>Final aggregated solutions with majority voting</description>
                    <action>
                        <type>RESULT</type>
                    </action>
                </output>
            </outputs>
            <listen>
                <event>solve_with_gpt4</event>
                <event>solve_with_claude</event>
                <event>solve_with_mixtral</event>
            </listen>
            <agent>
                <name>Result Aggregator Agent</name>
                <model>gpt-4o-2024-08-06</model>
            </agent>
        </event>
    </events>
</workflow>