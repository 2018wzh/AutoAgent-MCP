<workflow>
    <name>math_problem_solver_workflow</name>
    <system_input>
        <key>math_problem</key>
        <description>The math problem that needs to be solved.</description>
    </system_input>
    <system_output>
        <key>final_solution</key>
        <description>The final solution to the math problem determined by majority voting.</description>
    </system_output>

    <agents>
        <agent category="existing">
            <name>Math Solver Agent</name>
            <description>This agent is specialized in solving math problems using appropriate mathematical methods.</description>
        </agent>
        <agent category="existing">
            <name>Result Aggregator Agent</name>
            <description>This agent aggregates results from different models and determines the final answer through majority voting.</description>
        </agent>
    </agents>

    <events>
        <event>
            <name>on_start</name>
            <inputs>
                <input>
                    <key>math_problem</key>
                    <description>The math problem that needs to be solved.</description>
                </input>
            </inputs>
            <outputs>
                <output>
                    <key>math_problem</key>
                    <description>The math problem that needs to be solved.</description>
                    <action>
                        <type>RESULT</type>
                    </action>
                </output>
            </outputs>
        </event>

        <event>
            <name>solve_with_gpt4</name>
            <inputs>
                <input>
                    <key>math_problem</key>
                    <description>The math problem that needs to be solved.</description>
                </input>
            </inputs>
            <task>Solve the math problem using GPT-4 model.</task>
            <outputs>
                <output>
                    <key>gpt4_solution</key>
                    <description>The solution provided by GPT-4 model.</description>
                    <action>
                        <type>RESULT</type>
                    </action>
                </output>
            </outputs>
            <listen>
                <event>on_start</event>
            </listen>
            <agent>
                <name>Math Solver Agent</name>
                <model>gpt-4o-2024-08-06</model>
            </agent>
        </event>

        <event>
            <name>solve_with_claude</name>
            <inputs>
                <input>
                    <key>math_problem</key>
                    <description>The math problem that needs to be solved.</description>
                </input>
            </inputs>
            <task>Solve the math problem using Claude model.</task>
            <outputs>
                <output>
                    <key>claude_solution</key>
                    <description>The solution provided by Claude model.</description>
                    <action>
                        <type>RESULT</type>
                    </action>
                </output>
            </outputs>
            <listen>
                <event>on_start</event>
            </listen>
            <agent>
                <name>Math Solver Agent</name>
                <model>claude-3-5-sonnet-20241022</model>
            </agent>
        </event>

        <event>
            <name>solve_with_deepseek</name>
            <inputs>
                <input>
                    <key>math_problem</key>
                    <description>The math problem that needs to be solved.</description>
                </input>
            </inputs>
            <task>Solve the math problem using Deepseek model.</task>
            <outputs>
                <output>
                    <key>deepseek_solution</key>
                    <description>The solution provided by Deepseek model.</description>
                    <action>
                        <type>RESULT</type>
                    </action>
                </output>
            </outputs>
            <listen>
                <event>on_start</event>
            </listen>
            <agent>
                <name>Math Solver Agent</name>
                <model>deepseek/deepseek-chat</model>
            </agent>
        </event>

        <event>
            <name>aggregate_results</name>
            <inputs>
                <input>
                    <key>gpt4_solution</key>
                    <description>The solution provided by GPT-4 model.</description>
                </input>
                <input>
                    <key>claude_solution</key>
                    <description>The solution provided by Claude model.</description>
                </input>
                <input>
                    <key>deepseek_solution</key>
                    <description>The solution provided by Deepseek model.</description>
                </input>
            </inputs>
            <task>Aggregate the solutions from different models and determine the final answer through majority voting.</task>
            <outputs>
                <output>
                    <key>final_solution</key>
                    <description>The final solution determined by majority voting.</description>
                    <action>
                        <type>RESULT</type>
                    </action>
                </output>
            </outputs>
            <listen>
                <event>solve_with_gpt4</event>
                <event>solve_with_claude</event>
                <event>solve_with_deepseek</event>
            </listen>
            <agent>
                <name>Result Aggregator Agent</name>
                <model>gpt-4o-2024-08-06</model>
            </agent>
        </event>
    </events>
</workflow>